# Metric Definitions - Single Source of Truth
# All agents reference this file. No agent defines its own formulas.

metrics:
  m1vfm:
    name: M1VFM (Month 1 Value for Money)
    formula: Month 1 attributed revenue per channel
    unit: USD
    direction: higher_better
    channels: [sem, display, affiliate, synthesis]

  roas:
    name: ROAS (Return on Ad Spend)
    formula: Revenue / Spend
    unit: ratio
    direction: higher_better
    channels: [sem, display, affiliate]

  cac:
    name: CAC (Customer Acquisition Cost)
    formula: Spend / New Customers
    unit: USD
    direction: lower_better
    channels: [sem, display, affiliate]

  contribution_margin:
    name: Contribution Margin
    formula: (Revenue - COGS - Variable Costs) / Revenue
    unit: percent
    direction: higher_better
    channels: [synthesis]

  ctr:
    name: CTR (Click-Through Rate)
    formula: Clicks / Impressions
    unit: percent
    direction: higher_better
    channels: [sem, display, seo]

  cvr:
    name: CVR (Conversion Rate)
    formula: Conversions / Clicks
    unit: percent
    direction: higher_better
    channels: [sem, display, affiliate]

  cpc:
    name: CPC (Cost Per Click)
    formula: Spend / Clicks
    unit: USD
    direction: lower_better
    channels: [sem, display]

  cpm:
    name: CPM (Cost Per Mille)
    formula: (Spend / Impressions) * 1000
    unit: USD
    direction: lower_better
    channels: [display]

  impression_share:
    name: Impression Share
    formula: Your Impressions / Eligible Impressions
    unit: percent
    direction: higher_better
    channels: [sem]

  avg_position:
    name: Average Position
    formula: Average ranking position in SERP
    unit: number
    direction: lower_better
    channels: [seo]

  epc:
    name: EPC (Earnings Per Click)
    formula: Revenue / Clicks
    unit: USD
    direction: higher_better
    channels: [affiliate]

  commission_rate:
    name: Commission Rate
    formula: Commission Paid / Revenue
    unit: percent
    direction: lower_better
    channels: [affiliate]

  viewability:
    name: Viewability Rate
    formula: Viewable Impressions / Measured Impressions
    unit: percent
    direction: higher_better
    channels: [display]

  new_customer_share:
    name: New Customer Share
    formula: New Customers / Total Customers
    unit: percent
    direction: higher_better
    channels: [sem, display, affiliate]

  # CRM / Lifecycle metrics
  open_rate:
    name: Open Rate
    formula: Opens / Delivered
    unit: percent
    direction: higher_better
    channels: [email, push_notification]

  click_rate:
    name: Click Rate (CRM)
    formula: Clicks / Delivered
    unit: percent
    direction: higher_better
    channels: [email, push_notification, sms]

  unsubscribe_rate:
    name: Unsubscribe Rate
    formula: Unsubscribes / Delivered
    unit: percent
    direction: lower_better
    channels: [email, sms]

  deliverability_rate:
    name: Deliverability Rate
    formula: Delivered / Sent
    unit: percent
    direction: higher_better
    channels: [email, push_notification, sms]

  send_volume:
    name: Send Volume
    formula: Total messages sent
    unit: count
    direction: context_dependent
    channels: [email, push_notification, sms]

  # Social metrics
  engagement_rate:
    name: Engagement Rate
    formula: (Likes + Comments + Shares) / Reach
    unit: percent
    direction: higher_better
    channels: [managed_social, promoted_social]

  social_reach:
    name: Social Reach
    formula: Unique users who saw content
    unit: count
    direction: higher_better
    channels: [managed_social, promoted_social]

  video_completion_rate:
    name: Video Completion Rate
    formula: Video Completions / Video Starts
    unit: percent
    direction: higher_better
    channels: [display, promoted_social]

  # Distribution / Partnership metrics
  distribution_take_rate:
    name: Distribution Take Rate
    formula: Net Revenue / Gross Revenue
    unit: percent
    direction: higher_better
    channels: [distribution]

  referral_incentive_cost:
    name: Referral Incentive Cost
    formula: Total incentives paid / Referred conversions
    unit: USD
    direction: lower_better
    channels: [paid_user_referral]

  # Metasearch metrics
  avg_bid:
    name: Average Bid
    formula: Total bid spend / Total auctions
    unit: USD
    direction: context_dependent
    channels: [metasearch]

  booking_rate:
    name: Booking Rate
    formula: Bookings / Clicks
    unit: percent
    direction: higher_better
    channels: [metasearch]

  # Pricing & Promotions metrics
  discount_rate:
    name: Discount Rate
    formula: Discount Amount / Gross Revenue
    unit: ratio
    direction: lower_better
    channels: [promo]

  redemption_rate:
    name: Redemption Rate
    formula: Redemptions / Eligible Users
    unit: ratio
    direction: higher_better
    channels: [promo]

  promo_roi:
    name: Promo ROI
    formula: (Incremental Revenue - Discount Cost) / Discount Cost
    unit: ratio
    direction: higher_better
    channels: [promo]

  incremental_lift_pct:
    name: Incremental Lift %
    formula: (Promo Revenue - Baseline Revenue) / Baseline Revenue
    unit: percentage
    direction: higher_better
    channels: [promo]

  cannibalization_rate:
    name: Cannibalization Rate
    formula: Estimated Base Sales Lost / Total Promo Orders
    unit: ratio
    direction: lower_better
    channels: [promo]
